import{d as k,o as A,x as S,p as $,b as u,f as t,y as N,u as e,k as r,j as C,z as F,A as O,C as R,c as f,e as a,m as T,g as i,q as z,F as V,l as B,B as K}from"./app-CYJ_YUB3.js";import{_ as M,K as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-QfRs3ZOJ.js";import{_ as v,b as g,a as x}from"./InputError.vue_vue_type_script_setup_true_lang-Boou2LfL.js";import{_ as E}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B4eh9BvB.js";import{u as H,i as G,P as I,_ as L,a as U,b as j,c as q}from"./SelectTrigger.vue_vue_type_script_setup_true_lang-TQG9QCD2.js";import{C as J}from"./Card-Cgl2uETk.js";import"./index-Dfcg1sHp.js";import"./check-Dh0jxbDg.js";const Q=k({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(c){const n=c,{forwardRef:_,currentElement:y}=H(),m=G();A(()=>{m.valueElement=y});const p=S(()=>{var P;let s=[];const d=Array.from(m.optionsSet.value),o=h=>d.find(b=>b.value===h);return Array.isArray(m.modelValue.value)?s=m.modelValue.value.map(h=>{var b;return((b=o(h))==null?void 0:b.textContent)??""}):s=[((P=o(m.modelValue.value))==null?void 0:P.textContent)??""],s.filter(Boolean)}),l=S(()=>p.value.length?p.value.join(", "):n.placeholder);return(s,d)=>(u(),$(e(I),{ref:e(_),as:s.as,"as-child":s.asChild,style:{pointerEvents:"none"},"data-placeholder":p.value.length?void 0:n.placeholder},{default:t(()=>[N(s.$slots,"default",{selectedLabel:p.value,modelValue:e(m).modelValue.value},()=>[r(C(l.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),w=k({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(c){const n=c;return(_,y)=>(u(),$(e(Q),F(O(n)),{default:t(()=>[N(_.$slots,"default")]),_:3},16))}}),W={class:"flex justify-between items-center"},X={class:"font-medium"},Y=["onClick"],re=k({__name:"Create",props:{users:Object,services:Object},setup(c){const n=R({user_id:"",services:[{service_id:"",quantity:"",estimated_date:""}]});function _(){n.services.push({service_id:"",quantity:"",estimated_date:""})}function y(p){n.services.splice(p,1)}function m(){n.post(route("dashboard.orders.store"),{onSuccess:()=>{D.success("Pesanan berhasil dibuat"),n.reset()}})}return(p,l)=>(u(),f(V,null,[a(e(T),{title:"Buat Pesanan"}),a(M,null,{title:t(()=>l[1]||(l[1]=[r("Buat Pesanan")])),desc:t(()=>l[2]||(l[2]=[r("Buat pesanan dengan beberapa layanan")])),default:t(()=>[a(J,null,{default:t(()=>[i("form",{onSubmit:z(m,["prevent"]),class:"max-w-2xl space-y-4"},[i("div",null,[a(e(v),null,{default:t(()=>l[3]||(l[3]=[r("Nama Pelanggan")])),_:1}),a(e(L),{modelValue:e(n).user_id,"onUpdate:modelValue":l[0]||(l[0]=s=>e(n).user_id=s)},{default:t(()=>[a(e(U),null,{default:t(()=>[a(e(w),{placeholder:"Pilih pelanggan"})]),_:1}),a(e(j),null,{default:t(()=>[(u(!0),f(V,null,B(c.users,s=>(u(),$(e(q),{key:s.id,value:s.id},{default:t(()=>[r(C(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),a(g,{message:e(n).errors.user_id},null,8,["message"])]),i("div",null,[a(e(v),null,{default:t(()=>l[4]||(l[4]=[r("Layanan")])),_:1}),(u(!0),f(V,null,B(e(n).services,(s,d)=>(u(),f("div",{key:d,class:"border rounded-md p-4 mb-2 space-y-2"},[i("div",W,[i("h4",X,"Layanan "+C(d+1),1),e(n).services.length>1?(u(),f("button",{key:0,type:"button",class:"text-red-500 text-sm",onClick:o=>y(d)}," Hapus ",8,Y)):K("",!0)]),i("div",null,[a(e(v),null,{default:t(()=>l[5]||(l[5]=[r("Layanan")])),_:1}),a(e(L),{modelValue:s.service_id,"onUpdate:modelValue":o=>s.service_id=o},{default:t(()=>[a(e(U),null,{default:t(()=>[a(e(w),{placeholder:"Pilih layanan"})]),_:1}),a(e(j),null,{default:t(()=>[(u(!0),f(V,null,B(c.services,o=>(u(),$(e(q),{key:o.id,value:o.id},{default:t(()=>[r(C(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),a(g,{message:e(n).errors[`services.${d}.service_id`]},null,8,["message"])]),i("div",null,[a(e(v),null,{default:t(()=>l[6]||(l[6]=[r("Berat (kg)")])),_:1}),a(e(x),{modelValue:s.quantity,"onUpdate:modelValue":o=>s.quantity=o,placeholder:"Berat"},null,8,["modelValue","onUpdate:modelValue"]),a(g,{message:e(n).errors[`services.${d}.quantity`]},null,8,["message"])]),i("div",null,[a(e(v),null,{default:t(()=>l[7]||(l[7]=[r("Estimasi hari")])),_:1}),a(e(x),{modelValue:s.estimated_date,"onUpdate:modelValue":o=>s.estimated_date=o,type:"number",placeholder:"Estimasi hari"},null,8,["modelValue","onUpdate:modelValue"]),a(g,{message:e(n).errors[`services.${d}.estimated_date`]},null,8,["message"])])]))),128)),a(e(E),{type:"button",variant:"outline",class:"mt-2",onClick:_},{default:t(()=>l[8]||(l[8]=[r(" + Tambah Layanan ")])),_:1})]),i("div",null,[a(e(E),{disabled:e(n).processing,type:"submit"},{default:t(()=>l[9]||(l[9]=[r(" Simpan Pesanan ")])),_:1},8,["disabled"])])],32)]),_:1})]),_:1})],64))}});export{re as default};
