import{_ as y}from"./AppLayout.vue_vue_type_script_setup_true_lang-QfRs3ZOJ.js";import{_ as k}from"./OrderStatus.vue_vue_type_script_setup_true_lang-CkGLNFYO.js";import{_ as w}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B4eh9BvB.js";import{f as m}from"./helpers-Bar8SIlh.js";import{d as B,R as C,r as S,o as E,a as L,c as n,b as l,e as c,u as d,m as N,f as i,g as t,j as a,k as p,F as f,l as P,B as x,p as $,W as D}from"./app-CYJ_YUB3.js";import{C as T}from"./Card-Cgl2uETk.js";import"./index-Dfcg1sHp.js";const V={class:"mb-2 text-2xl font-semibold text-slate-800"},O={class:"mt-2 text-gray-600"},j={class:"mt-6"},q={class:"overflow-x-auto border rounded-md"},F={class:"min-w-full border-collapse text-sm"},H={class:"p-3 border-b"},U={class:"p-3 border-b"},W={class:"p-3 border-b"},G={class:"p-3 border-b"},M={class:"p-3 border-b font-semibold"},R={class:"p-3 border-b"},z={class:"p-3 border-b text-center"},A={key:0,class:"px-3 py-1 text-xs rounded-full bg-red-200 text-red-600 border border-red-300"},I={key:1,class:"px-3 py-1 text-xs rounded-full bg-green-200 text-green-700 border border-green-300"},J={class:"mt-8 grid grid-cols-3 gap-4"},K={class:"flex flex-col space-y-4 col-span-2"},Q={class:"mt-4 flex gap-4 items-center"},X={key:0,class:"h-full flex items-center"},Y=["href"],nt=B({__name:"Show",props:{order:Object},setup(h){const e=C({...h.order}),u=S(e.invoice_url??null),v=()=>{D.get(route("dashboard.orders.payment",e.id))};return E(()=>{e.id&&window.Echo.private(`order.${e.id}`).listen(".order.status.updated",r=>{e.id===r.order_id&&(e.status=r.status),r.status==="lunas"&&e.order_details.forEach(s=>{s.payment_status="paid"}),r.invoice_url&&(u.value=r.invoice_url)})}),L(()=>{var r;(r=e.value)!=null&&r.id&&window.Echo.leave(`order.${e.id}`)}),(r,s)=>(l(),n(f,null,[c(d(N),{title:"Detail Pesanan"}),c(y,null,{title:i(()=>s[0]||(s[0]=[p("Detail Pesanan")])),desc:i(()=>s[1]||(s[1]=[p("Lihat detail pesanan")])),default:i(()=>[c(T,null,{default:i(()=>{var b;return[t("h4",V," Order Number : "+a(e.order_number),1),t("div",O,[s[2]||(s[2]=p(" Pelanggan: ")),t("b",null,a((b=e.user)==null?void 0:b.name),1)]),t("div",j,[s[4]||(s[4]=t("h5",{class:"text-lg font-medium mb-3 text-gray-700"},"Detail Layanan",-1)),t("div",q,[t("table",F,[s[3]||(s[3]=t("thead",{class:"bg-slate-100 text-slate-700 text-left"},[t("tr",null,[t("th",{class:"p-3 border-b"},"No"),t("th",{class:"p-3 border-b"},"Layanan"),t("th",{class:"p-3 border-b"},"Berat (kg)"),t("th",{class:"p-3 border-b"},"Harga Satuan"),t("th",{class:"p-3 border-b"},"Total"),t("th",{class:"p-3 border-b"},"Estimasi Selesai"),t("th",{class:"p-3 border-b text-center"},"Status Pembayaran")])],-1)),t("tbody",null,[(l(!0),n(f,null,P(e.order_details,(o,g)=>{var _;return l(),n("tr",{key:o.id,class:"hover:bg-slate-50"},[t("td",H,a(g+1),1),t("td",U,a(((_=o.service)==null?void 0:_.name)??"-"),1),t("td",W,a(o.quantity),1),t("td",G,a(d(m)(o.price)),1),t("td",M,a(d(m)(o.amount)),1),t("td",R,a(o.estimated_date),1),t("td",z,[o.payment_status==="unpaid"?(l(),n("span",A," Belum lunas ")):(l(),n("span",I," Lunas "))])])}),128))])])])]),t("div",J,[s[5]||(s[5]=t("div",{class:"flex flex-col space-y-4"},[t("p",null,"Total Berat (kg)"),t("p",null,"Total Harga"),t("p",null,"Estimasi Selesai"),t("p",null,"Status Pesanan")],-1)),t("div",K,[t("p",null,a(e.quantity),1),t("p",null,[t("b",null,a(d(m)(e.total_amount)),1)]),t("p",null,a(e.estimated_date),1),t("p",null,[c(k,{status:e.status},null,8,["status"])])])]),t("div",Q,[t("div",null,[e.invoice_url?x("",!0):(l(),$(d(w),{key:0,disabled:u.value,onClick:v},{default:i(()=>s[6]||(s[6]=[p(" Generate Link ")])),_:1},8,["disabled"]))]),u.value&&e.status!=="lunas"?(l(),n("div",X,[t("a",{class:"inline-flex text-blue-500 hover:text-blue-600 underline",href:u.value,target:"_blank"}," Payment link ",8,Y)])):x("",!0)])]}),_:1})]),_:1})],64))}});export{nt as default};
